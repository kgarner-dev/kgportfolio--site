---
import Masthead from '../../components/Masthead.astro';
import Layout from '../../layouts/Layout.astro';
import { db, Work, eq } from 'astro:db';

const { project } = Astro.params;
const projectSlug = String(project)

const workItems = await db.select().from(Work).where(eq(Work.url, projectSlug));
const work = workItems[0] ?? null;
---

<Layout 
	title=`Kaleb Garner - ${ work.title }`
	description=`${ work.tldr }`
>
    <Masthead 
        title={ work.title }
        headline={ work.headline }
        date={ work.date }
        tldr={ work.tldr }
        thumbnail={ work.thumbnail }
    />
</Layout>
